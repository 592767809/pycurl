language: python
matrix:
  include:
    # all supported Python versions
    - python: 2.6
      env:
        - TEST_DOCS_EXAMPLES=1
    - python: 2.7
      env:
        - TEST_DOCS_EXAMPLES=1
    - python: 2.7
      env:
        - USEPY=3.1
        - TEST_DOCS_EXAMPLES=1
    - python: 3.2
      env:
        - TEST_DOCS_EXAMPLES=1
    - python: 3.3
      env:
        - TEST_DOCS_EXAMPLES=1
    - python: 3.4
      env:
        - TEST_DOCS_EXAMPLES=1
    - python: 3.5
      env:
        - TEST_DOCS_EXAMPLES=1
    
    # minimum libcurl we support
    - python: 2.7
      env:
        - USECURL=7.19.0
    
    # latest libcurl with each supported SSL backend
    - python: 2.7
      env:
        - USECURL=7.43.0
        - USESSL=openssl
    - python: 2.7
      env:
        - USECURL=7.43.0
        - USESSL=libressl
        - USELIBRESSL=2.2.0
    - python: 2.7
      env:
        - USECURL=7.43.0
        - USESSL=gnutls
    - python: 2.7
      env:
        - USECURL=7.43.0
        - USESSL=nss
    - python: 2.7
      env:
        - USECURL=7.43.0
        - USESSL=none
    
    # GSSAPI without SSL, this feels weird
    - python: 2.7
      env:
        - USECURL=7.43.0-gssapi
        - USESSL=none
    
    # AVOIDSTDIO tested on one Python version, must be Python 2.x
    - python: 2.7
      env:
        - AVOIDSTDIO=yes
    
    # common distributions:
    # CentOS 6
    - python: 2.6
      env:
        - USECURL=7.19.7-gssapi
        - USESSL=openssl
        - USEOPENSSL=1.0.1e
    # Debian Wheezy
    - python: 2.7
      env:
        - USECURL=7.26.0-gssapi
        - USESSL=gnutls
    # Debian Jessie
    - python: 3.4
      env:
        - USECURL=7.38.0-gssapi
        - USESSL=gnutls
install: >
  ./tests/travis/setup.sh
before_script: >
  ./tests/travis/hack.sh
script: >
  ./tests/travis/run.sh
